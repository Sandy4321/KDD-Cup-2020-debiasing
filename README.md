<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>
###  **KDD Cup 2020 Challenges for Modern E-Commerce Platform: Debiasing**

---

#### 1. 赛题简介：

​	本题的目标是**如何推荐过去很少曝光的物品，以对抗推荐系统中经常遇到的马太效应**

#### 2. 排名机制：

​	必须在ndcg@50 full 排名前65，然后根据ndcg@50 half再进行排名。

#### 3. 建模思路：

​	我们既需要考虑full也需要考虑half，如果想在最后拿一个好名次的话。

​	想当然的一个思路就是，分别建立两个模型，一个更加专注full，另一个更加专注half，然后进行融合。

<img src="README.assets/model.png" alt="avatar" style="zoom:60%;" />

​	**为什么选择ItemCF？**

​	ItemCF是根据用户历史行为推荐相似物品，其更注重个性化，并且ItemCF的推荐有很好的新颖性，容易发现并推荐长尾里的物品。因此，较为适合这道题目。

​	**1. 专注full的ItemCF**

​		由于提升full本身其实并不是这道赛题的要求，所以，这个模块本身比较简单，就是对ItemCF的一种优化，其中参考了qyxs和鱼佬的baseline。

​		物品i和物品j的相似度计算：	$$W_{ij}=\frac{\sum\frac{0.8^{\mid loc_{i}-loc_{j} \mid-1}}{\mid t_{i} - t_{j}\mid\ast1000+1}}{\sqrt{N(i)}*\sqrt{N(j)}} + \frac{\sum\frac{1}{1+\log{N(u)}}}{\sqrt{N(i)}*\sqrt{N(j)}}$$

​		用户u对物品j的兴趣:                $$P_{uj}=\sum W_{ij}*0.7^{loc_{i}}$$

​		对于$$W_{ij}$$来说，左边就是一个单纯的**IUF**，降低了活跃用户对物品相似度的贡献；右边是考虑到用户历史点击行为中的物品的点击顺序和点击时间，显然，两个商品的点击顺序越靠近以及点击时间间隔越小，两个商品的相似度也就越高。对于$$P_{uj}$$来说，增加了一个权重，即用户u的历史点击行为中点击过的商品的位置权重，理所当然，用户上一次点击和上上上上一次点击所代表的用户当前的偏好是不同的，所以我们考虑加大了上一次点击的商品的权重。

​		并且在训练中，需要把全阶段的数据进行训练：根据时间戳，在全阶段数据中选择待预测用户u下一次点击的时间戳之前的数据，对用户历史行为进行扩充。

​		在其他的一些细节上，选择向full偏斜。

​		A榜成绩：full 0.49   half 0.28

​	**2. 专注half的ItemCF**

​		该模型在鱼佬的baseline的基础上，在计算物品相似度$$W_{ij}$$时添加了物品之间的内容相似度。

​		在其他的一些细节上，选择向half偏斜。

​		A榜成绩：full 0.45  half 0.33

​	**3.  双路召回融合排序**

​		我们是根据召回物品的位置进行融合排序的。两个ItemCF先分别召回50个候选商品。

​		具体的，1. 如果某个物品都被双路召回，那么其位置就是物品分别在两路中的位置和

​					   2. 如果某个物品仅被一路召回，那么其位置就是物品在被召回的一路中的位置加上50

​						3. 根据位置对所有物品进行排序，仅取top50作为推荐结果。							   

​		A榜最终成绩：full 0.54  half 0.34

​		rank: A榜 43/1895		B榜 26/1895



​	附A榜源代码。

